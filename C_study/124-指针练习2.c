/*
	指针进阶
		9.指针和数组面试题的解析
			
			笔试题1()
			笔试题2()
			笔试题3()
			笔试题4()
			笔试题5()
			笔试题6()
*/

#include "define.h"

void 笔试题1()
{
	int a[5] = { 1,2,3,4,5 };
	int* ptr = (int*)(&a + 1);
	printf("%d,%d", *(a + 1), *(ptr - 1));
}

/**************************************************************************************************************************************************/

struct Test
{
	// 由于还没学习结构体，这里告知这个结构体的大小是20个字节
	int Num;
	char* pcName;
	short sDate;
	char cha[2];
	short sBa[4];
}*p;
void 笔试题2()
{
	// 假设p的值为0x100000，如下表达式的值分别是多少？
	// 已知，结构体Test类型的变量大小是20个字节

	printf("%p\n", p + 0x1);
	printf("%p\n", (unsigned long)p + 0x1);
	printf("%p\n", (unsigned int*)p + 0x1);
}

/**************************************************************************************************************************************************/

void 笔试题3()
{
	int a[4] = { 1,2,3,4 };
	int* ptr1 = (int*)(&a + 1);
	int* ptr2 = (int*)((int)a + 1);
	printf("%x, %x", ptr1[-1], *ptr2);
}

/**************************************************************************************************************************************************/

void 笔试题4()
{
	int a[2][3] = { (0, 1),(2, 3),(4, 5) };
	int* p;
	p = a[0];
	printf("%d", p[0]);
}

/**************************************************************************************************************************************************/

void 笔试题5()
{
	int a[5][5];
	int(*p)[4];
	p = a;
	printf("%p,%d\n", &p[4][2] - &a[4][2], &p[4][2] - &a[4][2]);
}

/**************************************************************************************************************************************************/

void 笔试题6()
{
	int aa[2][5] = { 1,2,3,4,5,6,7,8,9,10 };
	int* ptr1 = (int*)(&aa + 1);
	int* ptr2 = (int*)(*(aa + 1));
	printf("%d,%d", *(ptr1 - 1), *(ptr2 - 1));
}

int main()
{
	笔试题1();

	笔试题2();

	//笔试题3();

	笔试题4();

	笔试题5();

	笔试题6();

	return 0;
}